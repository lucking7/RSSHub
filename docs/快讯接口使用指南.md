# 📢 开盘啦实时快讯接口使用指南

## ✅ 快讯接口已找到！

通过测试发现，**ZhiBoContent 接口就是开盘啦的实时快讯接口**！

---

## 🎯 接口信息

### 基本信息

```
接口名称: ZhiBoContent (直播内容 / 实时快讯)
请求方式: GET
接口地址: https://apphq.longhuvip.com/w1/api/index.php
```

### 请求参数

| 参数        | 值             | 说明       |
| ----------- | -------------- | ---------- |
| a           | ZhiBoContent   | 接口方法名 |
| apiv        | w21            | API 版本   |
| c           | ConceptionPoint | 控制器名   |
| PhoneOSNew  | 1              | 系统类型   |

---

## 📊 快讯特点

### 1. 实时性强
- ⚡ **秒级更新**: 盘中每几分钟就会有新快讯
- 🔔 **AI 生成**: 部分快讯由 AI 大模型根据行情自动生成
- 👥 **人工发布**: 部分由分析师实时发布

### 2. 内容丰富
- 📝 **市场动态**: 指数涨跌、板块异动
- 🎯 **个股提示**: 涨停、跌停、异动股票
- 📰 **重要资讯**: 题材炒作、政策消息
- 🏢 **板块轮动**: 热点板块、资金流向

### 3. 关联信息
- 📊 **相关个股**: 每条快讯会标注相关股票代码
- 📈 **实时涨幅**: 显示相关股票的实时涨跌幅
- 👤 **消息来源**: 标注发布者（系统/分析师）
- 🖼️ **图片支持**: 部分快讯带有配图

---

## 🔍 实测数据展示

### 测试时间
2025-10-21 测试

### 快讯示例

```
【1】[13:17:00] 来源: xmm
内容: 芯片闻泰科技首板涨停（该内容由AI大模型根据行情自动生成）
相关个股: 闻泰科技(600745) 10%

【2】[11:30:00] 来源: Livermore
内容: 三大指数早盘单边上涨，上证指数涨超1%，创业板指涨近3%，
      预计两市全天成交不足2万亿，相较上个交易日放量5%，
      当前上涨超4000家。市场延续普涨，多题材强势轮动...
相关个股: 湖北广电(000665) 10.05% 武汉控股(600168) 9.98% 
         合肥城建(002208) 9.99%

【3】[11:19:00] 来源: xqm
内容: 大金融异动拉升，天风证券逼近涨停，权重东方财富涨近2%，
      长江证券、国盛金控等跟涨...
相关个股: 天风证券(601162) 7.27% 东方财富(300059) 1.16%
```

---

## 💻 快速开始

### 方式 1: 命令行测试

```bash
# 获取最新快讯
curl "https://apphq.longhuvip.com/w1/api/index.php?a=ZhiBoContent&apiv=w21&c=ConceptionPoint&PhoneOSNew=1"
```

### 方式 2: Python 一行代码

```python
import requests
data = requests.get("https://apphq.longhuvip.com/w1/api/index.php", params={"a":"ZhiBoContent","apiv":"w21","c":"ConceptionPoint","PhoneOSNew":"1"}).json()
print(data['List'][0]['Comment'])  # 打印最新快讯
```

### 方式 3: 使用提供的脚本

```bash
# 运行快讯监控脚本
python3 快讯监控示例.py
```

---

## 🛠️ 使用场景

### 1. 实时监控大屏
```python
# 每30秒刷新一次，显示最新快讯
monitor = KaiPanLaNewsMonitor()
monitor.monitor_realtime(interval=30)
```

### 2. 关键词提醒
```python
# 监控特定关键词（如"涨停"、"芯片"等）
results = monitor.get_news_by_keyword("涨停")
for news in results:
    send_notification(news)  # 发送通知
```

### 3. 个股跟踪
```python
# 跟踪特定股票的相关快讯
stock_news = monitor.get_news_by_stock("600745")
print(f"闻泰科技相关快讯: {len(stock_news)}条")
```

### 4. 数据分析
```python
# 分析快讯频率和热点
data = monitor.get_news()
# 统计提及最多的股票
# 分析不同时段的快讯数量
# 识别市场热点题材
```

---

## 📋 返回数据结构

### 完整 JSON 结构

```json
{
  "JHJJYD": ["", "", 0],
  "List": [
    {
      "ID": "84330",
      "UID": "204",
      "Time": 1761023820,
      "Comment": "快讯内容文本",
      "Type": "0",
      "PlateCode": "",
      "PlateName": "",
      "PlateJE": "",
      "PlateZDF": "",
      "ThemeInfo": [],
      "Interpretation": "",
      "IsChart": "0",
      "ShareData": {},
      "UserName": "xmm",
      "Image": "",
      "Stock": [
        ["600745", "闻泰科技", 10]
      ],
      "DisStock": [
        ["600745", "闻泰科技"]
      ],
      "ThemeClassInfo": [],
      "styleIndex": [],
      "BoomReason": ""
    }
  ]
}
```

### 关键字段说明

| 字段     | 类型   | 说明                               |
| -------- | ------ | ---------------------------------- |
| ID       | String | 快讯唯一 ID（用于去重）            |
| Time     | Number | Unix 时间戳（秒）                  |
| Comment  | String | 快讯内容文本                       |
| UserName | String | 发布者（xmm/Livermore/系统等）     |
| Stock    | Array  | 相关股票 [[代码, 名称, 涨幅%]]     |
| Image    | String | 配图 URL（部分快讯有）             |

---

## 🎓 高级用法

### 1. 快讯去重

```python
class NewsMonitor:
    def __init__(self):
        self.seen_ids = set()
    
    def is_new_news(self, news_id):
        if news_id in self.seen_ids:
            return False
        self.seen_ids.add(news_id)
        return True
```

### 2. 快讯分类

```python
def classify_news(comment):
    """快讯分类"""
    if "涨停" in comment:
        return "涨停快讯"
    elif "跌停" in comment:
        return "跌停快讯"
    elif "异动" in comment:
        return "异动快讯"
    elif "板块" in comment:
        return "板块快讯"
    else:
        return "综合快讯"
```

### 3. 快讯推送

```python
def push_to_wechat(news):
    """推送到微信"""
    # 使用企业微信 webhook
    webhook_url = "https://qyapi.weixin.qq.com/..."
    data = {
        "msgtype": "markdown",
        "markdown": {
            "content": f"# {news['Comment']}\n时间: {news['Time']}"
        }
    }
    requests.post(webhook_url, json=data)

def push_to_feishu(news):
    """推送到飞书"""
    # 使用飞书 webhook
    pass
```

### 4. 数据持久化

```python
import sqlite3

def save_to_db(news):
    """保存到数据库"""
    conn = sqlite3.connect('news.db')
    cursor = conn.cursor()
    
    cursor.execute("""
        INSERT OR IGNORE INTO news 
        (id, time, comment, user, stocks)
        VALUES (?, ?, ?, ?, ?)
    """, (
        news['ID'],
        news['Time'],
        news['Comment'],
        news['UserName'],
        json.dumps(news['Stock'])
    ))
    
    conn.commit()
    conn.close()
```

---

## ⚠️ 注意事项

### 1. 请求频率
- ✅ **推荐**: 30-60 秒一次
- ⚠️ **避免**: 过于频繁（<10 秒）
- 💡 **建议**: 交易时间内频率可适当提高

### 2. 数据时效性
- ✅ 盘中实时更新
- ✅ 盘后停止更新
- ✅ 非交易日无新数据

### 3. ID 去重
```python
# 使用 ID 字段进行去重
if news['ID'] != last_id:
    # 处理新快讯
    last_id = news['ID']
```

### 4. 异常处理
```python
try:
    data = requests.get(url, timeout=10)
    # 处理数据
except requests.Timeout:
    print("请求超时")
except Exception as e:
    print(f"错误: {e}")
```

---

## 🆚 与其他接口对比

| 特性       | ZhiBoContent（快讯） | DiskReview（点评） | ZhangFuDetail（详情） |
| ---------- | -------------------- | ------------------ | --------------------- |
| 更新频率   | ⚡ 实时（分钟级）    | 🔄 较慢（10 分钟） | 🔄 较慢（5 分钟）     |
| 数据详细度 | 📝 文本描述          | 💬 综合评价        | 📊 数值统计           |
| 相关股票   | ✅ 有                | ❌ 无              | ❌ 无                 |
| 适用场景   | 实时提醒、资讯推送   | 市场情绪判断       | 数据分析、统计        |

---

## 📚 相关文档

- [开盘啦直播接口文档.md](./开盘啦直播接口文档.md) - 完整接口文档
- [快讯监控示例.py](./快讯监控示例.py) - 可运行的监控脚本
- [API 调用整理文档.md](./API调用整理文档.md) - 所有 API 总览

---

## 🎉 总结

✅ **快讯接口**: ZhiBoContent  
✅ **测试状态**: 已验证可用  
✅ **更新频率**: 实时（分钟级）  
✅ **数据质量**: 高（AI + 人工）  
✅ **应用场景**: 实时监控、消息推送、数据分析  

**开盘啦的快讯接口非常适合用于构建实时股市资讯系统！** 🚀

---

**文档版本**: 1.0  
**测试日期**: 2025-10-21  
**维护**: AI Assistant

