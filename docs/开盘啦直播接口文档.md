# å¼€ç›˜å•¦ç›´æ’­æŽ¥å£æ–‡æ¡£

## ðŸ“¡ æŽ¥å£æ¦‚è§ˆ

è¿™äº›æ˜¯å¼€ç›˜å•¦ App çš„å®žæ—¶ç›´æ’­æŽ¥å£ï¼Œç”¨äºŽèŽ·å–ç›˜ä¸­å®žæ—¶èµ„è®¯ã€å¸‚åœºæƒ…ç»ªå’Œæ¶¨åœè¡¨çŽ°ç­‰æ•°æ®ã€‚

---

## 1. ç›´æ’­å†…å®¹ / å®žæ—¶å¿«è®¯ (ZhiBoContent) ðŸ“¢

**è¿™æ˜¯å¼€ç›˜å•¦çš„æ ¸å¿ƒå¿«è®¯æŽ¥å£ï¼Œå®žæ—¶æŽ¨é€å¸‚åœºåŠ¨æ€å’Œé‡è¦èµ„è®¯ï¼**

### åŸºæœ¬ä¿¡æ¯

```
GET https://apphq.longhuvip.com/w1/api/index.php
å‚æ•°:
  a=ZhiBoContent
  apiv=w21
  c=ConceptionPoint
  PhoneOSNew=1
```

**æ›´æ–°é¢‘çŽ‡**: å®žæ—¶æ›´æ–°ï¼Œç›˜ä¸­æ¯å‡ åˆ†é’Ÿå°±ä¼šæœ‰æ–°çš„å¿«è®¯æŽ¨é€

### è¿”å›žæ•°æ®ç»“æž„

```json
{
  "JHJJYD": ["", "", 0],
  "List": [
    {
      "ID": "84330",
      "UID": "204",
      "Time": 1761023820, // Unixæ—¶é—´æˆ³
      "Comment": "èŠ¯ç‰‡é—»æ³°ç§‘æŠ€é¦–æ¿æ¶¨åœï¼ˆè¯¥å†…å®¹ç”±AIå¤§æ¨¡åž‹æ ¹æ®è¡Œæƒ…è‡ªåŠ¨ç”Ÿæˆï¼‰",
      "Type": "0",
      "PlateCode": "",
      "PlateName": "",
      "PlateJE": "",
      "PlateZDF": "",
      "ThemeInfo": [],
      "Interpretation": "",
      "IsChart": "0",
      "ShareData": {},
      "UserName": "xmm",
      "Image": "",
      "Stock": [
        ["600745", "é—»æ³°ç§‘æŠ€", 10] // [ä»£ç , åç§°, æ¶¨å¹…]
      ],
      "DisStock": [["600745", "é—»æ³°ç§‘æŠ€"]],
      "ThemeClassInfo": [],
      "styleIndex": [],
      "BoomReason": ""
    }
  ]
}
```

### å­—æ®µè¯´æ˜Ž

| å­—æ®µ      | ç±»åž‹   | è¯´æ˜Ž                          |
| --------- | ------ | ----------------------------- |
| ID        | String | ç›´æ’­æ¶ˆæ¯ ID                   |
| UID       | String | ç”¨æˆ· ID                       |
| Time      | Number | å‘å¸ƒæ—¶é—´ï¼ˆUnix æ—¶é—´æˆ³ï¼‰       |
| Comment   | String | ç›´æ’­å†…å®¹æ–‡æœ¬                  |
| Type      | String | æ¶ˆæ¯ç±»åž‹                      |
| PlateCode | String | æ¿å—ä»£ç                       |
| PlateName | String | æ¿å—åç§°                      |
| PlateJE   | String | æ¿å—é‡‘é¢                      |
| PlateZDF  | String | æ¿å—æ¶¨è·Œå¹…                    |
| UserName  | String | å‘å¸ƒè€…ç”¨æˆ·å                  |
| Image     | String | å›¾ç‰‡ URL                      |
| Stock     | Array  | ç›¸å…³è‚¡ç¥¨ [[ä»£ç , åç§°, æ¶¨å¹…]] |
| DisStock  | Array  | æ˜¾ç¤ºè‚¡ç¥¨ [[ä»£ç , åç§°]]       |

### ä½¿ç”¨ç¤ºä¾‹

#### åŸºç¡€è°ƒç”¨

```bash
# èŽ·å–å®žæ—¶å¿«è®¯
curl "https://apphq.longhuvip.com/w1/api/index.php?a=ZhiBoContent&apiv=w21&c=ConceptionPoint&PhoneOSNew=1"
```

#### Python ç¤ºä¾‹ - åŸºç¡€ç‰ˆ

```python
import requests
import json
from datetime import datetime

url = "https://apphq.longhuvip.com/w1/api/index.php"
params = {
    "a": "ZhiBoContent",
    "apiv": "w21",
    "c": "ConceptionPoint",
    "PhoneOSNew": "1"
}

response = requests.get(url, params=params)
data = response.json()

# è§£æžå¿«è®¯å†…å®¹
for item in data['List']:
    time_str = datetime.fromtimestamp(item['Time']).strftime('%H:%M:%S')
    comment = item['Comment']
    user = item.get('UserName', 'ç³»ç»Ÿ')
    stocks = item.get('Stock', [])
    
    print(f"[{time_str}] æ¥æº: {user}")
    print(f"å†…å®¹: {comment}")
    
    if stocks:
        print("ç›¸å…³ä¸ªè‚¡:", end=" ")
        for stock in stocks:
            print(f"{stock[1]}({stock[0]}) {stock[2]}%", end=" ")
        print()
    print("-" * 80)
```

#### Python ç¤ºä¾‹ - å¿«è®¯ç›‘æŽ§ç‰ˆ

```python
import requests
import time
from datetime import datetime

class NewsMonitor:
    def __init__(self):
        self.url = "https://apphq.longhuvip.com/w1/api/index.php"
        self.params = {
            "a": "ZhiBoContent",
            "apiv": "w21",
            "c": "ConceptionPoint",
            "PhoneOSNew": "1"
        }
        self.last_id = None
    
    def get_news(self):
        """èŽ·å–æœ€æ–°å¿«è®¯"""
        response = requests.get(self.url, params=self.params)
        return response.json()
    
    def monitor(self, interval=60):
        """æŒç»­ç›‘æŽ§å¿«è®¯"""
        print("ðŸ”” å¼€å§‹ç›‘æŽ§å®žæ—¶å¿«è®¯...")
        
        while True:
            try:
                data = self.get_news()
                news_list = data.get('List', [])
                
                if news_list:
                    latest = news_list[0]  # ç¬¬ä¸€æ¡æ˜¯æœ€æ–°çš„
                    
                    # æ£€æŸ¥æ˜¯å¦æ˜¯æ–°æ¶ˆæ¯
                    if self.last_id != latest['ID']:
                        self.last_id = latest['ID']
                        
                        # æ‰“å°æ–°å¿«è®¯
                        time_str = datetime.fromtimestamp(latest['Time']).strftime('%H:%M:%S')
                        print(f"\nðŸ“¢ [{time_str}] æ–°å¿«è®¯")
                        print(f"æ¥æº: {latest.get('UserName', 'ç³»ç»Ÿ')}")
                        print(f"å†…å®¹: {latest['Comment']}")
                        
                        if latest.get('Stock'):
                            print("ç›¸å…³ä¸ªè‚¡:", end=" ")
                            for stock in latest['Stock'][:5]:
                                print(f"{stock[1]}({stock[0]}) {stock[2]}%", end=" ")
                            print()
                
                time.sleep(interval)
                
            except Exception as e:
                print(f"âŒ é”™è¯¯: {e}")
                time.sleep(5)

# ä½¿ç”¨ç¤ºä¾‹
monitor = NewsMonitor()
# monitor.monitor(interval=30)  # æ¯30ç§’æ£€æŸ¥ä¸€æ¬¡
```

---

## 2. ç›˜é¢ç‚¹è¯„ (DiskReview)

### åŸºæœ¬ä¿¡æ¯

```
GET https://apphq.longhuvip.com/w1/api/index.php
å‚æ•°:
  a=DiskReview
  apiv=w21
  c=HomeDingPan
  PhoneOSNew=1
```

### è¿”å›žæ•°æ®ç»“æž„

```json
{
  "info": {
    "strong": "69",
    "sign": "çŸ­æœŸå¤§ç›˜è¶‹åŠ¿åå¼ºï¼Œå¢žé‡èµ„é‡‘å…¥åœºè¾ƒæ˜Žæ˜¾ï¼Œå¸‚åœºèµšé’±æ•ˆåº”åå¼º"
  },
  "ttag": 0.000368,
  "errcode": "0"
}
```

### å­—æ®µè¯´æ˜Ž

| å­—æ®µ   | ç±»åž‹   | è¯´æ˜Ž                  |
| ------ | ------ | --------------------- |
| strong | String | ç»¼åˆå¼ºåº¦è¯„åˆ†ï¼ˆ0-100ï¼‰ |
| sign   | String | ç›˜é¢ç‚¹è¯„æ–‡å­—æè¿°      |

### ä½¿ç”¨ç¤ºä¾‹

```bash
# èŽ·å–ç›˜é¢ç‚¹è¯„
curl "https://apphq.longhuvip.com/w1/api/index.php?a=DiskReview&apiv=w21&c=HomeDingPan&PhoneOSNew=1"
```

```python
# èŽ·å–å¸‚åœºå¼ºåº¦
response = requests.get(url, params={
    "a": "DiskReview",
    "apiv": "w21",
    "c": "HomeDingPan",
    "PhoneOSNew": "1"
})
data = response.json()

strong = data['info']['strong']
sign = data['info']['sign']
print(f"ç»¼åˆå¼ºåº¦: {strong}")
print(f"ç›˜é¢ç‚¹è¯„: {sign}")
```

---

## 3. æ¶¨è·Œå¹…è¯¦æƒ… (ZhangFuDetail)

### åŸºæœ¬ä¿¡æ¯

```
GET https://apphq.longhuvip.com/w1/api/index.php
å‚æ•°:
  a=ZhangFuDetail
  apiv=w21
  c=HomeDingPan
  PhoneOSNew=1
```

### è¿”å›žæ•°æ®ç»“æž„

```json
{
  "date": "2025-10-21",
  "time": 1761024641,
  "info": {
    "-1": "522", // è·Œå¹… 1-2%
    "-2": "203", // è·Œå¹… 2-3%
    "-3": "69", // è·Œå¹… 3-4%
    "-4": "34", // è·Œå¹… 4-5%
    "-5": "18", // è·Œå¹… 5-6%
    "-6": "12", // è·Œå¹… 6-7%
    "-7": "5", // è·Œå¹… 7-8%
    "-8": "3", // è·Œå¹… 8-9%
    "-9": "0", // è·Œå¹… 9-10%
    "-10": "0", // è·Œåœ
    "0": "100", // å¹³ç›˜
    "1": "1406", // æ¶¨å¹… 1-2%
    "2": "1490", // æ¶¨å¹… 2-3%
    "3": "616", // æ¶¨å¹… 3-4%
    "4": "291", // æ¶¨å¹… 4-5%
    "5": "129", // æ¶¨å¹… 5-6%
    "6": "65", // æ¶¨å¹… 6-7%
    "7": "45", // æ¶¨å¹… 7-8%
    "8": "25", // æ¶¨å¹… 8-9%
    "9": "12", // æ¶¨å¹… 9-10%
    "10": "27", // æ¶¨åœ
    "DT": 3, // è·Œåœæ•°
    "SJDT": "2", // å®žé™…è·Œåœ
    "SJZT": "66", // å®žé™…æ¶¨åœ
    "STDT": "1", // STè·Œåœ
    "STZT": "10", // STæ¶¨åœ
    "SZJS": 4182, // ä¸Šæ¶¨å®¶æ•°
    "XDJS": 869, // ä¸‹è·Œå®¶æ•°
    "ZSZDFB": "1771,401,44,390,97,13,239,44,9,45,5,0,37,13,0,203,89,8,",
    "ZT": 76, // æ¶¨åœæ€»æ•°
    "sign": "å¸‚åœºäººæ°”é«˜æ¶¨",
    "szln": 59735048, // æ²ªå¸‚æˆäº¤é‡
    "qscln": 134773159, // å…¨å¸‚åœºæˆäº¤é‡
    "s_zrcs": 57915636, // æ²ªå¸‚æ˜¨æ—¥æˆäº¤
    "q_zrcs": 130700802, // å…¨å¸‚åœºæ˜¨æ—¥æˆäº¤
    "s_zrtj": 77250321, // æ²ªå¸‚æ˜¨æ—¥ç»Ÿè®¡
    "q_zrtj": 173760520 // å…¨å¸‚åœºæ˜¨æ—¥ç»Ÿè®¡
  },
  "ttag": 0.001514,
  "errcode": "0"
}
```

### å­—æ®µè¯´æ˜Ž

#### æ¶¨è·Œå¹…åˆ†å¸ƒå­—æ®µ

- `"-10"` ~ `"-1"`: è·Œå¹…å„åŒºé—´è‚¡ç¥¨æ•°é‡
- `"0"`: å¹³ç›˜è‚¡ç¥¨æ•°é‡
- `"1"` ~ `"10"`: æ¶¨å¹…å„åŒºé—´è‚¡ç¥¨æ•°é‡

#### ç»Ÿè®¡å­—æ®µ

| å­—æ®µ | è¯´æ˜Ž                 |
| ---- | -------------------- |
| SJZT | å®žé™…æ¶¨åœæ•°ï¼ˆå°æ¿çš„ï¼‰ |
| SJDT | å®žé™…è·Œåœæ•°ï¼ˆå°æ¿çš„ï¼‰ |
| ZT   | æ¶¨åœæ€»æ•°ï¼ˆåŒ…æ‹¬ç‚¸æ¿ï¼‰ |
| DT   | è·Œåœæ€»æ•°             |
| STZT | ST æ¶¨åœæ•°            |
| STDT | ST è·Œåœæ•°            |
| SZJS | ä¸Šæ¶¨å®¶æ•°             |
| XDJS | ä¸‹è·Œå®¶æ•°             |

#### æˆäº¤é‡å­—æ®µ

| å­—æ®µ   | è¯´æ˜Ž                 |
| ------ | -------------------- |
| qscln  | å…¨å¸‚åœºæˆäº¤é‡ï¼ˆä¸‡å…ƒï¼‰ |
| szln   | æ²ªå¸‚æˆäº¤é‡ï¼ˆä¸‡å…ƒï¼‰   |
| q_zrcs | å…¨å¸‚åœºæ˜¨æ—¥æˆäº¤       |
| s_zrcs | æ²ªå¸‚æ˜¨æ—¥æˆäº¤         |

### ä½¿ç”¨ç¤ºä¾‹

```python
# èŽ·å–æ¶¨è·Œå¹…è¯¦æƒ…
response = requests.get(url, params={
    "a": "ZhangFuDetail",
    "apiv": "w21",
    "c": "HomeDingPan",
    "PhoneOSNew": "1"
})
data = response.json()

info = data['info']

# è®¡ç®—æ¶¨è·Œæ¯”
up_count = info['SZJS']
down_count = info['XDJS']
total = up_count + down_count + int(info['0'])

print(f"ä¸Šæ¶¨: {up_count} ({up_count/total*100:.2f}%)")
print(f"ä¸‹è·Œ: {down_count} ({down_count/total*100:.2f}%)")
print(f"å¹³ç›˜: {info['0']}")

# æˆäº¤é‡ç»Ÿè®¡
qscln = int(info['qscln']) / 10000  # è½¬æ¢ä¸ºäº¿
q_zrcs = int(info['q_zrcs']) / 10000
change = (qscln - q_zrcs) / q_zrcs * 100

print(f"æˆäº¤é‡: {qscln:.0f}äº¿ (è¾ƒæ˜¨æ—¥{change:+.2f}%)")

# æ¶¨åœç»Ÿè®¡
print(f"æ¶¨åœ: {info['SJZT']}å®¶ (ç‚¸æ¿{int(info['ZT'])-int(info['SJZT'])}å®¶)")
print(f"è·Œåœ: {info['SJDT']}å®¶")
```

---

## 4. æ¶¨åœè¡¨çŽ° (ZhangTingExpression)

### åŸºæœ¬ä¿¡æ¯

```
GET https://apphq.longhuvip.com/w1/api/index.php
å‚æ•°:
  a=ZhangTingExpression
  apiv=w21
  c=HomeDingPan
  PhoneOSNew=1
```

### è¿”å›žæ•°æ®ç»“æž„

```json
{
  "info": [
    54, // [0] ä¸€æ¿æ•°é‡
    10, // [1] äºŒæ¿æ•°é‡
    1, // [2] ä¸‰æ¿æ•°é‡
    1, // [3] æ›´é«˜æ¿æ•°é‡
    15.1515, // [4] ä¸€æ¿å°æ¿çŽ‡ (%)
    20, // [5] äºŒæ¿å°æ¿çŽ‡ (%)
    20, // [6] ä¸‰æ¿å°æ¿çŽ‡ (%)
    15.3846, // [7] æ›´é«˜æ¿å°æ¿çŽ‡ (%)
    1.745, // [8] ä¸€æ¿å¹³å‡å°å• (ä¸‡æ‰‹)
    0.874, // [9] äºŒæ¿å¹³å‡å°å• (ä¸‡æ‰‹)
    2.209, // [10] ä¸‰æ¿å¹³å‡å°å• (ä¸‡æ‰‹)
    "é¢˜æå­˜åœ¨ç‚’ä½œæœºä¼š" // [11] æ¶¨åœè‚¡è¡¨çŽ°è¯„è¯­
  ],
  "ttag": 0.000405,
  "errcode": "0"
}
```

### å­—æ®µè¯´æ˜Žï¼ˆæŒ‰æ•°ç»„ç´¢å¼•ï¼‰

| ç´¢å¼• | è¯´æ˜Ž                     |
| ---- | ------------------------ |
| 0    | ä¸€æ¿æ•°é‡                 |
| 1    | äºŒæ¿æ•°é‡                 |
| 2    | ä¸‰æ¿æ•°é‡                 |
| 3    | æ›´é«˜æ¿ï¼ˆ4 æ¿åŠä»¥ä¸Šï¼‰æ•°é‡ |
| 4    | ä¸€æ¿å°æ¿çŽ‡ (%)           |
| 5    | äºŒæ¿å°æ¿çŽ‡ (%)           |
| 6    | ä¸‰æ¿å°æ¿çŽ‡ (%)           |
| 7    | æ›´é«˜æ¿å°æ¿çŽ‡ (%)         |
| 8    | ä¸€æ¿å¹³å‡å°å•ï¼ˆä¸‡æ‰‹ï¼‰     |
| 9    | äºŒæ¿å¹³å‡å°å•ï¼ˆä¸‡æ‰‹ï¼‰     |
| 10   | ä¸‰æ¿å¹³å‡å°å•ï¼ˆä¸‡æ‰‹ï¼‰     |
| 11   | æ¶¨åœè‚¡è¡¨çŽ°è¯„è¯­           |

### ä½¿ç”¨ç¤ºä¾‹

```python
# èŽ·å–æ¶¨åœè¡¨çŽ°
response = requests.get(url, params={
    "a": "ZhangTingExpression",
    "apiv": "w21",
    "c": "HomeDingPan",
    "PhoneOSNew": "1"
})
data = response.json()

info = data['info']

# è§£æžæ•°æ®
print(f"æ¶¨åœè‚¡è¡¨çŽ°: {info[11]}")
print(f"\nè¿žæ¿åˆ†å¸ƒ:")
print(f"  ä¸€æ¿: {info[0]}å®¶ (å°æ¿çŽ‡{info[4]:.2f}%, å¹³å‡å°å•{info[8]:.2f}ä¸‡æ‰‹)")
print(f"  äºŒæ¿: {info[1]}å®¶ (å°æ¿çŽ‡{info[5]:.2f}%, å¹³å‡å°å•{info[9]:.2f}ä¸‡æ‰‹)")
print(f"  ä¸‰æ¿: {info[2]}å®¶ (å°æ¿çŽ‡{info[6]:.2f}%, å¹³å‡å°å•{info[10]:.2f}ä¸‡æ‰‹)")
print(f"  é«˜æ¿: {info[3]}å®¶ (å°æ¿çŽ‡{info[7]:.2f}%)")

# åˆ¤æ–­å¸‚åœºæƒ…ç»ª
total_zt = sum(info[:4])
high_board_ratio = info[3] / total_zt * 100 if total_zt > 0 else 0
avg_seal_rate = (info[4] + info[5] + info[6] + info[7]) / 4

if avg_seal_rate > 80 and high_board_ratio > 5:
    print("\nå¸‚åœºæƒ…ç»ª: ðŸ”¥ æžå¼º")
elif avg_seal_rate > 60:
    print("\nå¸‚åœºæƒ…ç»ª: ðŸ’ª åå¼º")
elif avg_seal_rate > 40:
    print("\nå¸‚åœºæƒ…ç»ª: ðŸ˜ ä¸­æ€§")
else:
    print("\nå¸‚åœºæƒ…ç»ª: ðŸ˜Ÿ åå¼±")
```

---

## 5. ç»¼åˆåº”ç”¨ç¤ºä¾‹

### 5.1 å®žæ—¶ç›‘æŽ§è„šæœ¬

```python
import requests
import time
from datetime import datetime

class KaiPanLaLive:
    def __init__(self):
        self.base_url = "https://apphq.longhuvip.com/w1/api/index.php"
        self.common_params = {
            "apiv": "w21",
            "PhoneOSNew": "1"
        }

    def get_live_content(self):
        """èŽ·å–ç›´æ’­å†…å®¹"""
        params = {**self.common_params, "a": "ZhiBoContent", "c": "ConceptionPoint"}
        response = requests.get(self.base_url, params=params)
        return response.json()

    def get_disk_review(self):
        """èŽ·å–ç›˜é¢ç‚¹è¯„"""
        params = {**self.common_params, "a": "DiskReview", "c": "HomeDingPan"}
        response = requests.get(self.base_url, params=params)
        return response.json()

    def get_market_detail(self):
        """èŽ·å–æ¶¨è·Œå¹…è¯¦æƒ…"""
        params = {**self.common_params, "a": "ZhangFuDetail", "c": "HomeDingPan"}
        response = requests.get(self.base_url, params=params)
        return response.json()

    def get_zt_expression(self):
        """èŽ·å–æ¶¨åœè¡¨çŽ°"""
        params = {**self.common_params, "a": "ZhangTingExpression", "c": "HomeDingPan"}
        response = requests.get(self.base_url, params=params)
        return response.json()

    def monitor(self, interval=60):
        """æŒç»­ç›‘æŽ§"""
        print("å¼€å§‹ç›‘æŽ§...")
        while True:
            try:
                # èŽ·å–å¸‚åœºæ¦‚å†µ
                market = self.get_market_detail()
                info = market['info']

                # èŽ·å–æ¶¨åœè¡¨çŽ°
                zt_expr = self.get_zt_expression()
                zt_info = zt_expr['info']

                # èŽ·å–ç›˜é¢ç‚¹è¯„
                review = self.get_disk_review()

                # æ‰“å°æ‘˜è¦
                now = datetime.now().strftime("%H:%M:%S")
                print(f"\n{'='*60}")
                print(f"[{now}] å¸‚åœºæ¦‚å†µ")
                print(f"{'='*60}")

                # æˆäº¤é‡
                qscln = int(info['qscln']) / 10000
                print(f"æˆäº¤é‡: {qscln:.0f}äº¿")

                # æ¶¨è·Œç»Ÿè®¡
                print(f"æ¶¨åœ: {info['SJZT']}å®¶ | è·Œåœ: {info['SJDT']}å®¶")
                print(f"ä¸Šæ¶¨: {info['SZJS']}å®¶ | ä¸‹è·Œ: {info['XDJS']}å®¶")

                # è¿žæ¿åˆ†å¸ƒ
                print(f"è¿žæ¿: 1æ¿{zt_info[0]}å®¶ 2æ¿{zt_info[1]}å®¶ 3æ¿{zt_info[2]}å®¶ é«˜æ¿{zt_info[3]}å®¶")

                # ç»¼åˆå¼ºåº¦
                print(f"ç»¼åˆå¼ºåº¦: {review['info']['strong']}")
                print(f"ç›˜é¢ç‚¹è¯„: {review['info']['sign']}")
                print(f"æ¶¨åœè¡¨çŽ°: {zt_info[11]}")

                # ç­‰å¾…
                time.sleep(interval)

            except Exception as e:
                print(f"é”™è¯¯: {e}")
                time.sleep(5)

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == "__main__":
    monitor = KaiPanLaLive()

    # èŽ·å–å•æ¬¡æ•°æ®
    live = monitor.get_live_content()
    print("æœ€æ–°ç›´æ’­:", live['List'][0]['Comment'] if live['List'] else "æš‚æ— ")

    # æŒç»­ç›‘æŽ§ï¼ˆæ¯60ç§’æ›´æ–°ï¼‰
    # monitor.monitor(interval=60)
```

### 5.2 å¸‚åœºæƒ…ç»ªåˆ†æž

```python
def analyze_market_sentiment(kpl):
    """åˆ†æžå¸‚åœºæƒ…ç»ª"""
    # èŽ·å–æ•°æ®
    market = kpl.get_market_detail()
    zt_expr = kpl.get_zt_expression()
    review = kpl.get_disk_review()

    info = market['info']
    zt_info = zt_expr['info']

    # è®¡ç®—æŒ‡æ ‡
    up_ratio = int(info['SZJS']) / (int(info['SZJS']) + int(info['XDJS'])) * 100
    zt_count = int(info['SJZT'])
    avg_seal_rate = (zt_info[4] + zt_info[5] + zt_info[6] + zt_info[7]) / 4
    high_board_count = zt_info[3]
    strong_score = int(review['info']['strong'])

    # ç»¼åˆè¯„åˆ†
    sentiment_score = (
        up_ratio * 0.3 +           # ä¸Šæ¶¨æ¯”ä¾‹
        min(zt_count / 100, 1) * 100 * 0.25 +  # æ¶¨åœæ•°é‡
        avg_seal_rate * 0.25 +     # å°æ¿çŽ‡
        min(high_board_count / 10, 1) * 100 * 0.1 +  # é«˜æ¿æ•°é‡
        strong_score * 0.1         # ç»¼åˆå¼ºåº¦
    )

    # åˆ¤æ–­æƒ…ç»ª
    if sentiment_score >= 80:
        emotion = "ðŸ”¥ æžå¼º"
        suggestion = "å¯ç§¯æžå‚ä¸Žï¼Œå…³æ³¨é«˜æ¿è‚¡"
    elif sentiment_score >= 60:
        emotion = "ðŸ’ª åå¼º"
        suggestion = "å¯é€‚åº¦å‚ä¸Žï¼Œä¼˜é€‰é¢˜æé¾™å¤´"
    elif sentiment_score >= 40:
        emotion = "ðŸ˜ ä¸­æ€§"
        suggestion = "è°¨æ…Žå‚ä¸Žï¼ŒæŽ§åˆ¶ä»“ä½"
    else:
        emotion = "ðŸ˜Ÿ åå¼±"
        suggestion = "è§‚æœ›ä¸ºä¸»ï¼Œä¸å®œè¿½é«˜"

    return {
        "score": sentiment_score,
        "emotion": emotion,
        "suggestion": suggestion,
        "up_ratio": up_ratio,
        "zt_count": zt_count,
        "avg_seal_rate": avg_seal_rate,
        "high_board_count": high_board_count
    }

# ä½¿ç”¨
result = analyze_market_sentiment(monitor)
print(f"æƒ…ç»ªè¯„åˆ†: {result['score']:.1f}")
print(f"å¸‚åœºæƒ…ç»ª: {result['emotion']}")
print(f"æ“ä½œå»ºè®®: {result['suggestion']}")
```

---

## 6. ä¸Žå…¶ä»– API çš„å¯¹æ¯”

### ä¸Žä¹‹å‰æ•´ç†çš„å¼€ç›˜å•¦ API å¯¹æ¯”

| æŽ¥å£           | æœ¬æ–‡æ¡£ï¼ˆç›´æ’­ç±»ï¼‰    | ä¹‹å‰æ–‡æ¡£ï¼ˆæ•°æ®ç±»ï¼‰ |
| -------------- | ------------------- | ------------------ |
| **æ•°æ®å®žæ—¶æ€§** | âš¡ æžé«˜ï¼ˆç§’çº§æ›´æ–°ï¼‰ | ðŸ“Š è¾ƒé«˜ï¼ˆåˆ†é’Ÿçº§ï¼‰  |
| **æ•°æ®è¯¦ç»†åº¦** | ðŸ“ æ‘˜è¦ä¿¡æ¯         | ðŸ“‹ è¯¦ç»†åˆ—è¡¨        |
| **é€‚ç”¨åœºæ™¯**   | ç›‘æŽ§é¢æ¿ã€å®žæ—¶æé†’  | æ•°æ®åˆ†æžã€é€‰è‚¡     |

#### ç›´æ’­ç±»æŽ¥å£ï¼ˆæœ¬æ–‡æ¡£ï¼‰

- âœ… ZhiBoContent - å®žæ—¶ç›´æ’­
- âœ… DiskReview - ç›˜é¢ç‚¹è¯„
- âœ… ZhangFuDetail - æ¶¨è·Œå¹…è¯¦æƒ…
- âœ… ZhangTingExpression - æ¶¨åœè¡¨çŽ°

#### æ•°æ®ç±»æŽ¥å£ï¼ˆä¹‹å‰æ–‡æ¡£ï¼‰

- âœ… DaBanList - æ¶¨åœ/ç‚¸æ¿è¯¦ç»†åˆ—è¡¨
- âœ… MarketCapacity - æˆäº¤é‡åŽ†å²è¶‹åŠ¿
- âœ… RefreshStockList - æŒ‡æ•°è¯¦ç»†æ•°æ®

### æŽ¨èä½¿ç”¨åœºæ™¯

**å®žæ—¶ç›‘æŽ§** â†’ ä½¿ç”¨ç›´æ’­ç±»æŽ¥å£

- å¿«é€Ÿäº†è§£å¸‚åœºæ¦‚å†µ
- å®žæ—¶è·Ÿè¸ªå¸‚åœºå˜åŒ–
- æž„å»ºç›‘æŽ§å¤§å±

**æ·±åº¦åˆ†æž** â†’ ä½¿ç”¨æ•°æ®ç±»æŽ¥å£

- æ¶¨åœè‚¡è¯¦ç»†ä¿¡æ¯
- åŽ†å²æ•°æ®å›žæµ‹
- é€‰è‚¡ç­–ç•¥å¼€å‘

---

## 7. æ³¨æ„äº‹é¡¹

### 7.1 è¯·æ±‚é¢‘çŽ‡

- âš ï¸ å»ºè®®é—´éš” â‰¥ 30 ç§’
- âš ï¸ äº¤æ˜“æ—¶é—´å¤–å¯é™ä½Žé¢‘çŽ‡
- âš ï¸ é¿å…é¢‘ç¹è¯·æ±‚å¯¼è‡´ IP è¢«é™

### 7.2 æ•°æ®æ—¶æ•ˆæ€§

- âœ… ç›˜ä¸­æ•°æ®å®žæ—¶æ›´æ–°
- âœ… ç›˜åŽæ•°æ®ä¿æŒå½“æ—¥æ”¶ç›˜çŠ¶æ€
- âœ… éžäº¤æ˜“æ—¥è¿”å›žä¸Šä¸€äº¤æ˜“æ—¥æ•°æ®

### 7.3 æ—¶é—´è½¬æ¢

```python
# Unixæ—¶é—´æˆ³è½¬æ¢
from datetime import datetime

def timestamp_to_time(ts):
    return datetime.fromtimestamp(ts).strftime('%H:%M:%S')

# ç¤ºä¾‹
time_str = timestamp_to_time(1761023820)  # "14:30:20"
```

### 7.4 æ•°æ®å•ä½

- æˆäº¤é‡: ä¸‡å…ƒ
- å°å•: ä¸‡æ‰‹
- æ¶¨è·Œå¹…: %

---

## 8. HTML é¡µé¢é›†æˆ

æ ¹æ®æä¾›çš„ HTML ä»£ç ï¼Œå…³é”®é›†æˆç‚¹ï¼š

### 8.1 å®šæ—¶åˆ·æ–°é€»è¾‘

```javascript
// äº¤æ˜“æ—¶é—´å†…æ¯åˆ†é’Ÿåˆ·æ–°
function time_range(beginTime, endTime) {
  var b = new Date();
  var e = new Date();
  var n = new Date();

  b.setHours(beginTime.split(':')[0]);
  b.setMinutes(beginTime.split(':')[1]);
  e.setHours(endTime.split(':')[0]);
  e.setMinutes(endTime.split(':')[1]);

  if (n.getTime() - b.getTime() > 0 && n.getTime() - e.getTime() < 0) {
    getSource(); // åœ¨äº¤æ˜“æ—¶é—´å†…åˆ·æ–°
    return true;
  }
  return false;
}

// æ¯60ç§’æ£€æŸ¥ä¸€æ¬¡
setInterval(function () {
  time_range('9:00', '15:15');
}, 60000);
```

### 8.2 æ•°æ®æ ¼å¼è½¬æ¢

```javascript
// æ—¶é—´æˆ³è½¬æ—¶é—´
function getLocalTime(nS) {
  return new Date(parseInt(nS) * 1000).Format('hh:mm:ss');
}

// å¤„ç†Stockæ•°ç»„æ ¼å¼
data = data.replace(/(\"Stock\":\[\[).*?(?=\])/g, function (word) {
  str = word.match(/\"Stock\":\[\[(\S*)/)[1];
  return (
    '"Stock":[{"code":' +
    str.split(',')[0] +
    ',"name":' +
    str.split(',')[1] +
    ',"zf":' +
    str.split(',')[2]
  );
});
```

---

## 9. å®Œæ•´è°ƒç”¨ç¤ºä¾‹

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
å¼€ç›˜å•¦ç›´æ’­æŽ¥å£å®Œæ•´ç¤ºä¾‹
"""

import requests
import json
from datetime import datetime

class KaiPanLaLiveAPI:
    def __init__(self):
        self.base_url = "https://apphq.longhuvip.com/w1/api/index.php"
        self.headers = {
            'User-Agent': 'lhb/5.9.3 (com.kaipanla.www; build:0; iOS 15.4.0) Alamofire/5.9.3',
            'Accept': '*/*',
            'Accept-Language': 'zh-Hans-CN;q=1.0',
            'Accept-Encoding': 'gzip, deflate',
        }

    def _request(self, params):
        """ç»Ÿä¸€è¯·æ±‚æ–¹æ³•"""
        try:
            response = requests.get(
                self.base_url,
                params=params,
                headers=self.headers,
                timeout=10
            )
            return response.json()
        except Exception as e:
            print(f"è¯·æ±‚å¤±è´¥: {e}")
            return None

    def get_all_data(self):
        """ä¸€æ¬¡æ€§èŽ·å–æ‰€æœ‰æ•°æ®"""
        result = {}

        # 1. ç›´æ’­å†…å®¹
        live = self._request({
            "a": "ZhiBoContent",
            "apiv": "w21",
            "c": "ConceptionPoint",
            "PhoneOSNew": "1"
        })
        result['live'] = live

        # 2. ç›˜é¢ç‚¹è¯„
        review = self._request({
            "a": "DiskReview",
            "apiv": "w21",
            "c": "HomeDingPan",
            "PhoneOSNew": "1"
        })
        result['review'] = review

        # 3. æ¶¨è·Œå¹…è¯¦æƒ…
        detail = self._request({
            "a": "ZhangFuDetail",
            "apiv": "w21",
            "c": "HomeDingPan",
            "PhoneOSNew": "1"
        })
        result['detail'] = detail

        # 4. æ¶¨åœè¡¨çŽ°
        expression = self._request({
            "a": "ZhangTingExpression",
            "apiv": "w21",
            "c": "HomeDingPan",
            "PhoneOSNew": "1"
        })
        result['expression'] = expression

        return result

    def format_output(self, data):
        """æ ¼å¼åŒ–è¾“å‡º"""
        if not data:
            return

        print("\n" + "="*80)
        print(f"ðŸ“Š å¸‚åœºæ¦‚å†µ - {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
        print("="*80)

        # ç›˜é¢ç‚¹è¯„
        if data['review']:
            info = data['review']['info']
            print(f"\nðŸ’¡ ç»¼åˆå¼ºåº¦: {info['strong']}")
            print(f"ðŸ“ ç›˜é¢ç‚¹è¯„: {info['sign']}")

        # æ¶¨è·Œå¹…è¯¦æƒ…
        if data['detail']:
            info = data['detail']['info']
            qscln = int(info['qscln']) / 10000
            print(f"\nðŸ’° æˆäº¤é‡: {qscln:.0f}äº¿")
            print(f"ðŸ“ˆ æ¶¨åœ: {info['SJZT']}å®¶ | ðŸ“‰ è·Œåœ: {info['SJDT']}å®¶")
            print(f"ðŸ”¼ ä¸Šæ¶¨: {info['SZJS']}å®¶ | ðŸ”½ ä¸‹è·Œ: {info['XDJS']}å®¶")
            print(f"ðŸ“Š å¸‚åœºç‚¹è¯„: {info['sign']}")

        # æ¶¨åœè¡¨çŽ°
        if data['expression']:
            info = data['expression']['info']
            print(f"\nðŸŽ¯ æ¶¨åœè¡¨çŽ°: {info[11]}")
            print(f"   ä¸€æ¿: {info[0]}å®¶ (å°æ¿çŽ‡{info[4]:.1f}%)")
            print(f"   äºŒæ¿: {info[1]}å®¶ (å°æ¿çŽ‡{info[5]:.1f}%)")
            print(f"   ä¸‰æ¿: {info[2]}å®¶ (å°æ¿çŽ‡{info[6]:.1f}%)")
            print(f"   é«˜æ¿: {info[3]}å®¶ (å°æ¿çŽ‡{info[7]:.1f}%)")

        # æœ€æ–°ç›´æ’­
        if data['live'] and data['live']['List']:
            print(f"\nðŸ“¢ æœ€æ–°ç›´æ’­:")
            for item in data['live']['List'][:3]:  # åªæ˜¾ç¤ºæœ€æ–°3æ¡
                time = datetime.fromtimestamp(item['Time']).strftime('%H:%M:%S')
                comment = item['Comment']
                print(f"   [{time}] {comment[:100]}...")

# ä¸»å‡½æ•°
if __name__ == "__main__":
    api = KaiPanLaLiveAPI()

    # èŽ·å–æ•°æ®
    data = api.get_all_data()

    # æ ¼å¼åŒ–è¾“å‡º
    api.format_output(data)
```

---

## 10. æ›´æ–°æ—¥å¿—

### v1.0 (2025-10-21)

- âœ… æµ‹è¯•æ‰€æœ‰ 4 ä¸ªç›´æ’­æŽ¥å£
- âœ… å®Œæ•´æ–‡æ¡£åŒ–æŽ¥å£å‚æ•°å’Œè¿”å›žå€¼
- âœ… æä¾› Python å’Œ JavaScript ç¤ºä¾‹
- âœ… æ·»åŠ å¸‚åœºæƒ…ç»ªåˆ†æžç¤ºä¾‹

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æµ‹è¯•æ—¶é—´**: 2025-10-21  
**ç»´æŠ¤**: AI Assistant
