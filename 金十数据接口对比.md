# 金十数据路由接口对比

## 一、核心区别总览

| 对比项 | 普通接口 (`/jin10`) | 新版接口 (`/jin10/newflash`) |
|--------|---------------------|------------------------------|
| **API 来源** | 官方 API | 网页 JS 文件 |
| **API URL** | `flash-api.jin10.com/get_flash_list` | `www.jin10.com/flash_newest.js` |
| **数据格式** | 标准 JSON | JavaScript 变量赋值 |
| **参数数量** | 1 个 | 3 个 |
| **分类支持** | ❌ 不支持 | ✅ 支持 5 种频道 |
| **类型筛选** | ❌ 不支持 | ✅ 支持快讯/深度文章 |
| **字段利用度** | 基础 | 完整 |
| **模板功能** | 简单 | 增强 |

---

## 二、详细对比

### 1️⃣ API 来源和认证

#### 普通接口
```typescript
API: https://flash-api.jin10.com/get_flash_list
认证: 需要 headers
  - x-app-id: bVBF4FyRTn5NJF5n
  - x-version: 1.0.0
参数:
  - channel: -8200
  - vip: 1
返回: 标准 JSON 格式
```

#### 新版接口
```typescript
API: https://www.jin10.com/flash_newest.js
认证: 只需 Referer
  - Referer: https://www.jin10.com/
  - User-Agent: Mozilla/5.0...
参数:
  - t: 时间戳（防缓存）
返回: JavaScript 变量赋值
  var newest = [数据数组];
```

**差异分析**：
- ✅ 新版接口更简单，无需 app-id
- ✅ 新版接口更稳定，网页 JS 文件变化频率低
- ⚠️ 新版接口需要额外解析 JavaScript 代码

---

### 2️⃣ 参数支持

#### 普通接口
```
路径: /jin10/:important?
参数:
  - important: 任意值开启，留空关闭
  
示例:
  /jin10          # 所有快讯
  /jin10/1        # 只看重要快讯
```

#### 新版接口
```
路径: /jin10/newflash/:channel?/:type?/:important?
参数:
  - channel: 频道分类 (1-5)
  - type: 内容类型 (0=快讯, 2=深度文章)
  - important: 重要性 (1=只看重要)
  
示例:
  /jin10/newflash              # 所有快讯
  /jin10/newflash/3            # 全球市场
  /jin10/newflash/4/0/1        # A股重要快讯
  /jin10/newflash//2           # 所有深度文章
  /jin10/newflash/1//1         # 外汇重要快讯
```

**差异分析**：
- ✅ 新版支持多维度组合筛选
- ✅ 新版可精确定位用户需求
- ✅ 新版提供更细粒度的订阅选项

---

### 3️⃣ 频道分类支持

#### 普通接口
```
❌ 不支持频道分类
所有频道混在一起显示
```

#### 新版接口
```
✅ 支持 5 种频道分类

const channelMap = {
    1: '外汇/贵金属',
    2: '期货',
    3: '全球市场',
    4: 'A股',
    5: '深度文章'
};

可根据 channel 数组过滤:
- item.channel = [3, 4] 表示该条快讯属于"全球市场"和"A股"
```

**差异分析**：
- ✅ 新版适合垂直领域用户（如只关注 A 股）
- ✅ 新版可创建多个分类订阅源
- ✅ 新版提供 category 标签分类

---

### 4️⃣ 内容类型支持

#### 普通接口
```
❌ 不区分快讯和深度文章
type 字段未利用
```

#### 新版接口
```
✅ 区分内容类型

type 字段含义:
  - 0: 普通快讯（短消息）
  - 2: 深度文章（长文分析）

过滤逻辑:
if (typeFilter !== null) {
    filtered = filtered.filter(item => item.type === typeFilter);
}

标题显示:
const typeLabel = item.type === 2 ? '【深度】' : '';
```

**差异分析**：
- ✅ 新版可单独订阅深度文章
- ✅ 新版标题明确标识内容类型
- ✅ 新版满足不同阅读需求

---

### 5️⃣ 数据字段利用

#### 普通接口使用的字段
```typescript
✅ id              // 快讯ID
✅ time            // 发布时间
✅ data.content    // 内容
✅ data.pic        // 图片
✅ important       // 重要性
❌ type            // 未使用
❌ channel         // 未使用
❌ data.source     // 未使用
❌ data.source_link // 未使用
❌ remark          // 未使用
```

#### 新版接口使用的字段
```typescript
✅ id              // 快讯ID
✅ time            // 发布时间
✅ type            // 内容类型（快讯/深度）
✅ important       // 重要性
✅ channel         // 频道分类数组
✅ data.content    // 内容
✅ data.pic        // 图片
✅ data.source     // 来源（作为 author）
✅ data.source_link // 原文链接（优先使用）
✅ remark          // 附加信息（图表/链接/行情）
```

**字段利用率**：
- 普通接口：**50%** (5/10)
- 新版接口：**100%** (10/10)

---

### 6️⃣ 模板功能对比

#### 普通接口模板 (`description.art`)
```art
{{ if content }}{{@ content }}{{ /if }}
{{ if pic }}<br><img src="{{ pic }}">{{ /if }}
```

功能：
- 显示内容
- 显示图片

#### 新版接口模板 (`newflash.art`)
```art
{{ if content }}{{@ content }}{{ /if }}

{{ if pic }}
<br><br>
<img src="{{ pic }}" alt="配图" style="max-width: 100%;">
{{ /if }}

{{ if source_link }}
<br><br>
<p><a href="{{ source_link }}" target="_blank">📖 查看原文</a></p>
{{ /if }}

{{ if remarks && remarks.length > 0 }}
<br><hr>
<div style="background: #f5f5f5; padding: 10px; margin-top: 10px;">
<strong>📊 附加信息：</strong>
{{ each remarks remark }}
    {{ if remark.type === 'link' }}
    <br>• <a href="{{ remark.data.url }}" target="_blank">{{ remark.data.title || '相关链接' }}</a>
    {{ /if }}
    {{ if remark.type === 'miniProgram' }}
    <br>• 📈 {{ remark.data.title || '查看图表' }}
    {{ /if }}
    {{ if remark.type === 'quotes' }}
    <br>• 💹 行情数据: {{ remark.data.name || '' }}
    {{ /if }}
    {{ if remark.type === 'content' }}
    <br>• {{ remark.data.content || remark.data.title || '相关内容' }}
    {{ /if }}
{{ /each }}
</div>
{{ /if }}
```

功能：
- ✅ 显示内容
- ✅ 显示图片（带样式）
- ✅ **原文链接按钮**
- ✅ **附加信息区域**
  - 相关链接
  - 图表数据
  - 行情信息
  - 扩展内容

**差异分析**：
- ✅ 新版提供完整的信息获取路径
- ✅ 新版显示更多上下文信息
- ✅ 新版视觉效果更好

---

### 7️⃣ 链接策略

#### 普通接口
```typescript
link: `https://www.jin10.com/#${item.id}`
// 固定使用金十网站锚点链接
```

#### 新版接口
```typescript
// 优先使用原文链接，回退到金十锚点
const itemLink = item.data.source_link || `https://www.jin10.com/#${item.id}`;
```

**差异分析**：
- ✅ 新版优先跳转到原始新闻源
- ✅ 新版提供更权威的信息来源
- ✅ 新版用户体验更好

---

### 8️⃣ 标题策略

#### 普通接口
```typescript
title: titleMatch[1] || item.data.content
// 简单提取标题
```

#### 新版接口
```typescript
// 添加标签前缀
const typeLabel = item.type === 2 ? '【深度】' : '';
const importantLabel = item.important === 1 ? '【重要】' : '';
title: `${importantLabel}${typeLabel}${title}`

// 示例输出:
// "【重要】【深度】美联储宣布降息50个基点"
// "【重要】美股三大指数集体收涨"
// "央行开展7天期逆回购操作"
```

**差异分析**：
- ✅ 新版一眼识别内容类型
- ✅ 新版便于快速筛选
- ✅ 新版标题信息更丰富

---

### 9️⃣ 缓存策略

#### 普通接口
```typescript
cacheKey: 'jin10:index'
// 所有请求共享一个缓存
```

#### 新版接口
```typescript
// 根据参数组合生成独立缓存
cacheKey: `jin10:newflash:${channel || 'all'}:${type || 'all'}:${important || 'all'}`

// 示例:
// 'jin10:newflash:3:0:all'  - 全球市场普通快讯
// 'jin10:newflash:4:all:1'  - A股重要内容
// 'jin10:newflash:all:2:all' - 所有深度文章
```

**差异分析**：
- ✅ 新版缓存更精细
- ✅ 新版减少不必要的过滤计算
- ✅ 新版性能更优

---

### 🔟 元数据对比

#### 普通接口
```typescript
return {
    title: '金十数据',
    link: 'https://www.jin10.com/',
    item: items,
    // ❌ 无 description
    // ❌ 无 category
    // ❌ 无 author
};
```

#### 新版接口
```typescript
// 动态生成标题
const titleParts = ['金十数据'];
if (channelFilter) titleParts.push(channelMap[channelFilter]);
if (typeFilter === 0) titleParts.push('快讯');
if (typeFilter === 2) titleParts.push('深度文章');
if (importantFilter === 1) titleParts.push('重要');

return {
    title: titleParts.join(' - '),
    // 示例: "金十数据 - 全球市场 - 重要"
    link: 'https://www.jin10.com/',
    item: items,
    description: titleParts.slice(1).join(' ') || '实时快讯',
    // 每个 item 包含:
    // - category: 频道标签数组
    // - author: 来源名称
};
```

**差异分析**：
- ✅ 新版 Feed 标题更具描述性
- ✅ 新版提供分类标签
- ✅ 新版显示信息来源

---

## 三、使用场景推荐

### 🎯 推荐使用普通接口的场景
1. ✅ 需要混合查看所有频道的快讯
2. ✅ 只需简单的重要性过滤
3. ✅ 追求最简单的配置
4. ✅ 对 API 稳定性要求极高（官方 API）

### 🎯 推荐使用新版接口的场景
1. ✅ 需要按频道订阅（如只关注 A 股）
2. ✅ 需要区分快讯和深度文章
3. ✅ 需要查看原文链接和附加信息
4. ✅ 需要组合多个维度筛选
5. ✅ 需要更丰富的元数据（来源、分类等）
6. ✅ 追求完整的信息获取体验

---

## 四、迁移建议

如果您当前使用普通接口，可以这样迁移：

| 旧路由 | 新路由等效 | 说明 |
|--------|------------|------|
| `/jin10` | `/jin10/newflash` | 所有快讯 |
| `/jin10/1` | `/jin10/newflash///1` | 只看重要 |

**新增功能示例**：
```
/jin10/newflash/4        # 只看 A 股
/jin10/newflash/3/0/1    # 全球市场重要快讯
/jin10/newflash//2       # 所有深度文章
/jin10/newflash/1        # 外汇/贵金属所有内容
```

---

## 五、总结

### 普通接口优势
- 🎯 简单直接
- 🎯 官方 API，稳定性高
- 🎯 适合通用场景

### 新版接口优势
- 🎯 功能完整，字段利用率 100%
- 🎯 多维度分类筛选
- 🎯 增强的内容展示
- 🎯 更好的用户体验
- 🎯 适合垂直领域订阅

### 建议
- **通用用户**：使用普通接口 `/jin10`
- **专业用户**：使用新版接口 `/jin10/newflash` + 参数组合
- **最佳实践**：两者共存，满足不同用户需求
